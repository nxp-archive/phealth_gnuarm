2009-06-23  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-builtins.def (BUILT_IN_GOMP_STREAM_TAIL_WINDOW,
	BUILT_IN_GOMP_STREAM_HEAD_WINDOW, BUILT_IN_GOMP_STREAM_POP_WINDOW,
	BUILT_IN_GOMP_STREAM_PUSH_WINDOW): New builtins.

2009-01-20  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-low.c (scan_sharing_clauses): Added specific case for tasks,
	in the OMP_CLAUSE_LASTPRIVATE case, to force passing the pointers
	to the variables in the omp_data structures.
	(lower_lastprivate_clauses, lower_send_clauses): Make sure that
	when lowering lastprivate clauses on tasks we only use references.
	(create_task_copyfn): Ensure that the pointers to all lastprivate
	items are copied and available to the task if a copy function is
	created.
	(lower_omp_taskreg): Removed the reordering of the semaphore wait
	statement introduced in the parent as the copy-out is now done on
	hte child side (within the task).

	* gimplify.c (gimplify_omp_task): Code cleanup and pass the
	semaphore as firstprivate rather than shared to the task.

2009-01-20  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-low.c (lower_omp_taskreg): Moved the generation of post/wait
	synchronization to gimplify.c.
	* gimplify.c (gimplify_omp_task): Added generation of post/wait
	synchronization.  Pass the semaphore by copy in the outlined
	task as a firstprivate variable.

2008-12-11  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-builtins.def (BUILT_IN_GOMP_STREAM_TAIL,
	BUILT_IN_GOMP_STREAM_COMMIT): New builtins.

2008-10-20  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-low.c (register_omp_task, eq_omp_tgraph_var_info,
	hash_omp_tgraph_var_info): New.
	(lower_omp_taskreg): Added call to register_omp_task.  The
	objective is to register OMP task information at the cgraph_node
	level whenever FIRSTPRIVATE or LASTPRIVATE clauses are present.
	
	* cgraph.h (omp_task_list, omp_tgraph_var_info): New.
	(cgraph_node): Added new field tgraph_vars_hash.
	
2008-10-16  Antoniu Pop  <antoniu.pop@gmail.com>

	* cp/parser.c (OMP_TASK_CLAUSE_MASK): Added
	PRAGMA_OMP_CLAUSE_LASTPRIVATE to allow for lastprivate clauses on
	tasks.
	
2008-10-15  Antoniu Pop  <antoniu.pop@gmail.com>

	* gimplify.c (gimplify_omp_task): Reverted previous changes.  Code
	is moved to omp-low.c.	
	* omp-low.c (lower_omp_taskreg): Handle lastprivate clauses for
	OMP_TASKs.  Generate semaphore synchronization.
	
2008-10-01  Antoniu Pop  <antoniu.pop@gmail.com>
	    Sebastian Pop  <sebastian.pop@amd.com>

	* c-parser.c (c_parser_omp_single): Handle OMP_CLAUSE_LASTPRIVATE
	for tasks.
	* gimplify.c (gimplify_omp_task): Introduce synchronization 
	for tasks with OMP_CLAUSE_LASTPRIVATE clauses.
	* omp-low.c (lower_omp_taskreg): Generate the copy in and
        out of the task for OMP_CLAUSE_LASTPRIVATE variables.
	* testsuite/gcc.dg/gomp/stream-1.c: New.
	* testsuite/gcc.dg/gomp/stream-2.c: New.

2008-09-30  Antoniu Pop  <antoniu.pop@gmail.com>

	* omp-builtins.def (BUILT_IN_GOMP_SEM_CREATE,
	BUILT_IN_GOMP_SEM_INIT, BUILT_IN_GOMP_SEM_DESTROY,
	BUILT_IN_GOMP_SEM_POST, BUILT_IN_GOMP_SEM_WAIT): New builtins.

2008-09-28  Antoniu Pop  <antoniu.pop@gmail.com>
	    Sebastian Pop  <sebastian.pop@amd.com>

	* Revert changes from 2008-09-04 and 2008-08-28 (r139392:139978).

2008-09-28  Antoniu Pop  <antoniu.pop@gmail.com>
	    Sebastian Pop  <sebastian.pop@amd.com>

	* Merge from mainline (r139387:140737).

2008-09-04  Antoniu Pop  <antoniu.pop@gmail.com>

	* tree-pretty-print.c (dump_omp_clause): Handle
        OMP_CLAUSE_INPUT and OMP_CLAUSE_OUTPUT.

2008-08-28  Antoniu Pop  <antoniu.pop@gmail.com>

	* c-pragma.h (PRAGMA_OMP_CLAUSE_INPUT, PRAGMA_OMP_CLAUSE_OUTPUT):
	New.	
	* c-parser.c (c_parser_omp_clause_name, c_parser_omp_all_clauses):
	Handle PRAGMA_OMP_CLAUSE_INPUT and PRAGMA_OMP_CLAUSE_OUTPUT.
	(OMP_TASK_CLAUSE_MASK): Added PRAGMA_OMP_CLAUSE_INPUT and
	PRAGMA_OMP_CLAUSE_OUTPUT.
	(c_parser_omp_clause_input, c_parser_omp_clause_output): New.
	
	* tree.h (OMP_CLAUSE_INPUT, OMP_CLAUSE_OUTPUT): New clause codes.
	(OMP_CLAUSE_DECL): Updated the range of codes for clauses that
	take variable lists for argument.
	* tree.c (omp_clause_num_ops, omp_clause_code_name): Added entries
	for OMP_CLAUSE_INPUT and OMP_CLAUSE_OUTPUT.
	(walk_tree_1): Handle OMP_CLAUSE_INPUT and OMP_CLAUSE_OUTPUT.

	* c-typeck.c (c_finish_omp_clauses): Stubs for supporting input
	and output clauses.	
	* gimplify.c (gimplify_scan_omp_clauses): Stubs for supporting
	input and output clauses.
	* omp-low.c (scan_sharing_clauses): Stubs for supporting input and
	output clauses.

2008-04-22  Antoniu Pop  <antoniu.pop@gmail.com>
	    Sebastian Pop <sebastian.pop@amd.com>

	* builtin-types.def (BT_FN_BOOL_PTR, BT_FN_VOID_PTR_PTR_SIZE,
	BT_FN_PTR_SIZE_SIZE_SIZE): New types.     
	* fortran/types.def (BT_FN_BOOL_PTR, BT_FN_VOID_PTR_SIZE,
	BT_FN_VOID_PTR_PTR_SIZE, BT_FN_PTR_SIZE_SIZE_SIZE): New types.

	* omp-builtins.def (BUILT_IN_GOMP_STREAM_CREATE,
	BUILT_IN_GOMP_STREAM_PUSH, BUILT_IN_GOMP_STREAM_HEAD,
	BUILT_IN_GOMP_STREAM_POP, BUILT_IN_GOMP_STREAM_EOS_P,
	BUILT_IN_GOMP_STREAM_SET_EOS, BUILT_IN_GOMP_STREAM_DESTROY,
	BUILT_IN_GOMP_STREAM_ALIGN_PUSH, BUILT_IN_GOMP_STREAM_ALIGN_POP):
	New builtins.
